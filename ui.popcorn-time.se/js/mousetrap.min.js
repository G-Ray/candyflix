/* mousetrap v1.4.6 craig.is/killing/mice */
(function(J,r,f){function s(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function z(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return h[a.which]?h[a.which]:A[a.which]?A[a.which]:String.fromCharCode(a.which).toLowerCase()}function t(a){a=a||{};var b=!1,c;for(c in m)a[c]?b=!0:m[c]=0;b||(u=!1)}function B(a,b,c,d,e,K){var g,k,C=[],f=c.type;if(!l[a])return[];"keyup"==f&&v(a)&&(b=[a]);for(g=0;g<l[a].length;++g)if(k=
l[a][g],(d||!k.seq||m[k.seq]==k.level)&&f==k.action){var h;(h="keypress"==f&&!c.metaKey&&!c.ctrlKey)||(h=k.modifiers,h=b.sort().join(",")===h.sort().join(","));h&&(h=d&&k.seq==d&&k.level==K,(!d&&k.combo==e||h)&&l[a].splice(g,1),C.push(k))}return C}function L(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function w(a,b,c,d){n.stopCallback(b,b.target||b.srcElement,c,d)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=
!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function x(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=z(a);b&&("keyup"==a.type&&y===b?y=!1:n.handleKey(b,L(a),a))}function v(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function M(a,b,c,d){function e(b){return function(){u=b;++m[a];clearTimeout(D);D=setTimeout(t,1E3)}}function h(b){w(c,b,a);"keyup"!==d&&(y=z(b));setTimeout(t,10)}for(var g=m[a]=0;g<b.length;++g){var k=g+1===b.length?h:e(d||E(b[g+1]).action);F(b[g],k,d,
a,g)}}function E(a,b){var c,d,e,f=[];if("+"===a)c=["+"];else if(c=[],-1!==a.indexOf("++")){e=a.split("+");for(var g=e.length-1;0<=g;g--){var k=e[g];k||e[g-1]||(k="+");k&&c.push(k)}c=c.reverse()}else c=a.split("+");for(e=0;e<c.length;++e)d=c[e],G[d]&&(d=G[d]),b&&"keypress"!=b&&H[d]&&(d=H[d],f.push("shift")),v(d)&&f.push(d);c=d;e=b;if(!e){if(!p){p={};for(var l in h)95<l&&112>l||h.hasOwnProperty(l)&&(p[h[l]]=l)}e=p[c]?"keydown":"keypress"}"keypress"==e&&f.length&&(e="keydown");return{key:d,modifiers:f,
action:e}}function F(a,b,c,d,e){q[a+":"+c]=b;a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?M(a,f,b,c):(c=E(a,c),l[c.key]=l[c.key]||[],B(c.key,c.modifiers,{type:c.action},d,a,e),l[c.key][d?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:d,level:e,combo:a}))}var h={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",
93:"meta",224:"meta"},A={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},H={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},G={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p,l={},q={},m={},D,y=!1,I=!1,u=!1;for(f=1;20>f;++f)h[111+f]="f"+f;
for(f=0;9>=f;++f)h[f+96]=f;s(r,"keypress",x);s(r,"keydown",x);s(r,"keyup",x);var n={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)F(a[d],b,c);return this},unbind:function(a,b){return n.bind(a,function(){},b)},trigger:function(a,b){if(q[a+":"+b])q[a+":"+b]({},a);return this},reset:function(){l={};q={};return this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},
handleKey:function(a,b,c){var d=B(a,b,c),e;b={};var f=0,g=!1;for(e=0;e<d.length;++e)d[e].seq&&(f=Math.max(f,d[e].level));for(e=0;e<d.length;++e)d[e].seq?d[e].level==f&&(g=!0,b[d[e].seq]=1,w(d[e].callback,c,d[e].combo,d[e].seq)):g||w(d[e].callback,c,d[e].combo);d="keypress"==c.type&&I;c.type!=u||v(a)||d||t(b);I=g&&"keydown"==c.type}};J.Mousetrap=n;"function"===typeof define&&define.amd&&define(n)})(window,document);
